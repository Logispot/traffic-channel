function categorizeTrafficChannel(){const e=new URLSearchParams(getAllQueryParams()),c=document.referrer||"(direct)",o=e.get("utm_source")||"(direct)",a=e.get("utm_medium"),n=e.get("utm_campaign")||"(not set)";if(a){const e=a.toLowerCase(),t=["fb","facebook","remember","blind","instagram","an","ig"];if(["display"].includes(e)&&c!=="(direct)"){let o;try{o=new URL(c).hostname}catch{o="(invalid-referrer)"}const r=t.some(t=>o.includes(t)),i=t.some(t=>o.includes(t));if(r||i)return{channel:"Paid Social",source:i?o:o,medium:e,campaign:n}}if(["paid_social"].includes(e))return{channel:"Paid Social",source:o,medium:e,campaign:n};if(["display","banner"].includes(e))return{channel:"Display",source:o,medium:e,campaign:n};if(["cpc","ppc","brand_search","paid_search"].includes(e))return{channel:"Paid Search",source:o,medium:e,campaign:n};if(["email","newsletter"].includes(e))return{channel:"Email",source:o,medium:e,campaign:n};if(["social","social-media"].includes(e))return{channel:"Organic Social",source:o,medium:e,campaign:n};return{channel:"Other",source:o,medium:e,campaign:n}}if("(direct)"!==c){let o;try{o=new URL(c).hostname}catch{o="(invalid-referrer)"}if(["gclid","adgroupid","msclkid","n_campaign_type","n_media","n_ad_group","DMC_channel","DMC_campaign","DMC_keyword","DMC_medium","DMC_source","ad.search.naver.com"].some(c=>e.has(c)))return{channel:"Paid Search",source:o,medium:"cpc",campaign:"(not set)"};if(["fbclid","ttclid","twclid","li_fat_id","sc_click_id","pin_id"].some(c=>e.has(c)))return{channel:"Paid Social",source:o,medium:"social",campaign:"(not set)"};if(["facebook","twitter","linkedin","instagram","pinterest","reddit","tiktok","kakao","blog.naver.com","m.blog.naver.com","naverblog"].some(e=>o.includes(e)))return{channel:"Organic Social",source:o,medium:"social",campaign:"(not set)"};if(["google","bing","ecosia.org","yahoo","duckduckgo","baidu","naver","daum","nate"].some(e=>o.toLowerCase().includes(e)))return{channel:"Organic Search",source:o,medium:"organic",campaign:"(not set)"};if(["youtube.com"].some(e=>o.includes(e)))return{channel:"Organic Video",source:o,medium:"video",campaign:"(not set)"};if(["chatgpt","gemini","perplexity","claude","crosscenter.kr","felo.ai","wrtn.ai","clova","bard","copilot"].some(e=>o.includes(e)))return{channel:"Referral(AI)",source:o,medium:"referral",campaign:"(not set)"};return{channel:"Referral",source:o,medium:"referral",campaign:"(not set)"}}return{channel:"Direct",source:"(direct)",medium:"(none)",campaign:"(not set)"}}function setCookie(e,c,o){const a=new Date(Date.now()+24*o*60*60*1e3).toUTCString();document.cookie=`${e}=${encodeURIComponent(c)}; expires=${a}; path=/`}function saveTrafficDetailsToCookie(e={}){const c=30,o=getCookie("l_traffic_channel"),a=getCookie("l_traffic_source"),n=getCookie("l_traffic_medium"),i=getCookie("l_traffic_campaign");if(!(o||a||n||i)){const{channel:e,source:o,medium:a,campaign:n}=categorizeTrafficChannel();setCookie("l_traffic_channel",e,c),setCookie("l_traffic_source",o,c),setCookie("l_traffic_medium",a,c),setCookie("l_traffic_campaign",n,c)}}function getCookie(e){const c=`; ${document.cookie}`.split(`; ${e}=`);return 2===c.length?decodeURIComponent(c.pop().split(";").shift()):null}function getAllQueryParams(){const e={};if(window.location.search){new URLSearchParams(window.location.search).forEach(((c,o)=>{e[o]=c}))}if(window.location.hash.includes("?")){const c=window.location.hash.split("?")[1];new URLSearchParams(c).forEach(((c,o)=>{e[o]=c}))}return e}