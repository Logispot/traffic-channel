function categorizeTrafficChannel(){const e=new URLSearchParams(getAllQueryParams()),a=document.referrer||"(direct)",i=e.get("utm_source")||"(direct)",c=e.get("utm_medium"),n=e.get("utm_campaign")||"(not set)";if(c){const e=c.toLowerCase();return["paid_social"].includes(e)?{channel:"Paid Social",source:i,medium:e,campaign:n}:["display","banner"].includes(e)?{channel:"Display",source:i,medium:e,campaign:n}:["cpc","ppc","brand_search","paid_search"].includes(e)?{channel:"Paid Search",source:i,medium:e,campaign:n}:["email","newsletter","mail"].includes(e)?{channel:"Email",source:i,medium:e,campaign:n}:["social","organic_social","message"].includes(e)?{channel:"Organic Social",source:i,medium:e,campaign:n}:["organic_video","video"].includes(e)?{channel:"Organic Video",source:i,medium:e,campaign:n}:{channel:"Other",source:i,medium:e,campaign:n}}if("(direct)"!==a){let i;try{i=new URL(a).hostname}catch{i="(invalid-referrer)"}if(["gclid","adgroupid","msclkid","n_campaign_type","n_media","n_ad_group","DMC_channel","DMC_campaign","DMC_keyword","DMC_medium","DMC_source","ad.search.naver.com"].some(a=>e.has(a)))return{channel:"Paid Search",source:i,medium:"cpc",campaign:"(not set)"};if(["fbclid","ttclid","twclid","li_fat_id","sc_click_id","pin_id"].some(a=>e.has(a)))return{channel:"Paid Social",source:i,medium:"social",campaign:"(not set)"};if(["facebook","twitter","linkedin","instagram","instagram","pinterest","reddit","tiktok","kakao","kakao","blog.naver.com","m.blog.naver.com","naverblog"].some(e=>i.includes(e)))return{channel:"Organic Social",source:i,medium:"social",campaign:"(not set)"};if(["google","bing","ecosia.org","yahoo","duckduckgo","baidu","naver","daum","nate"].some(e=>i.toLowerCase().includes(e)))return{channel:"Organic Search",source:i,medium:"organic",campaign:"(not set)"};if(["youtube.com"].some(e=>i.includes(e)))return{channel:"Organic Video",source:i,medium:"video",campaign:"(not set)"};return["chatgpt","gemini","perplexity","claude","crosscenter.kr","felo.ai","wrtn.ai","clova","bard","copilot"].some(e=>i.includes(e))?{channel:"Referral(AI)",source:i,medium:"referral",campaign:"(not set)"}:{channel:"Referral",source:i,medium:"referral",campaign:"(not set)"}}return{channel:"Direct",source:"(direct)",medium:"(none)",campaign:"(not set)"}}function setCookie(e,a,i){const c=new Date(Date.now()+24*i*60*60*1e3).toUTCString();document.cookie=`${e}=${encodeURIComponent(a)}; expires=${c}; path=/`}function saveTrafficDetailsToCookie(e={}){const a=30,i=getCookie("l_traffic_channel"),c=getCookie("l_traffic_source"),n=getCookie("l_traffic_medium"),o=getCookie("l_traffic_campaign");if(!(i||c||n||o)){const{channel:e,source:i,medium:c,campaign:n}=categorizeTrafficChannel();setCookie("l_traffic_channel",e,a),setCookie("l_traffic_source",i,a),setCookie("l_traffic_medium",c,a),setCookie("l_traffic_campaign",n,a)}}function getCookie(e){const a=`; ${document.cookie}`.split(`; ${e}=`);return 2===a.length?decodeURIComponent(a.pop().split(";").shift()):null}function getAllQueryParams(){const e={};if(window.location.search){new URLSearchParams(window.location.search).forEach((a,i)=>{e[i]=a})}if(window.location.hash.includes("?")){const a=window.location.hash.split("?")[1];new URLSearchParams(a).forEach((a,i)=>{e[i]=a})}return e}